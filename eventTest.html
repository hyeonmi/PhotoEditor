<!DOCTYPE html>
<html>
<head>
    <title>mouse event with canvas</title>
</head>
<body>
<div style="border-color: gray;border:1px solid;width:300px;height:300px">
    <canvas id="canvas" width="300" height="300">
        canvas
    </canvas>
</div>
<div id="rubberbandDiv"></div>
</body>
<script type="text/javascript" src="js/vendor/jquery-1.9.1.min.js"></script>
<script type="text/javascript">
var canvas = document.getElementById("canvas"),
    context = canvas.getContext("2d");
var dragging = false;
var position = {};
context.lineWidth = 1;
context.lineJoin = "round";

    canvas.onmousedown = function(event){
        dragging = true;
        position.x = event.clientX;
        position.y = event.clientY;
    }
    canvas.onmousemove = function(event){
        if(dragging){
            var w = event.clientX - position.x;
            var h = event.clientY - position.y;
            context.clearRect(0, 0, canvas.width, canvas.height);
            context.beginPath();
            context.rect(position.x, position.y, w, h);
            context.stroke();
            context.closePath();
        }
    }
    canvas.onmouseup = function(event){
        dragging = false;
    }

</script>